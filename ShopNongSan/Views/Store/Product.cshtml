@model ShopNongSan.ViewModels.ProductDetailVM
@{
    ViewData["Title"] = Model.Product.Name;
}
<div class="row g-4">
    <div class="col-md-5">
        <img src="@(string.IsNullOrEmpty(Model.Product.ImageUrl) ? "/images/placeholder.png" : Model.Product.ImageUrl)"
             class="img-fluid rounded" alt="@Model.Product.Name" style="max-height:420px;object-fit:cover;">
    </div>
    <div class="col-md-7">
        <h3>@Model.Product.Name</h3>
        <div class="text-muted mb-2">@Model.Product.Category?.Name</div>
        <div class="h4 text-danger">@Model.Product.Price.ToString("#,0") ₫</div>
        <p class="mt-3">@Model.Product.Description</p>

        <form method="post" action="/Cart/Add" class="d-flex gap-2 align-items-center mt-3">
            <input type="hidden" name="id" value="@Model.Product.Id" />
            <input type="number" name="qty" value="1" min="1" class="form-control" style="width:100px;">
            <button class="btn btn-primary">Thêm vào giỏ</button>
        </form>
    </div>
</div>

@if (Model.Related.Any())
{
    <hr class="my-4" />
    <h5>Sản phẩm liên quan</h5>
    <div class="row g-3">
        @foreach (var p in Model.Related)
        {
            <div class="col-6 col-md-3">
                <a class="text-decoration-none text-dark" href="@Url.Action("Product", "Store", new { slug = p.Slug ?? "san-pham", id = p.Id })">
                    <div class="card product-card">
                        <img src="@(string.IsNullOrEmpty(p.ImageUrl) ? "/images/placeholder.png" : p.ImageUrl)" />
                        <div class="card-body">
                            <div class="small">@p.Name</div>
                            <div class="price">@p.Price.ToString("#,0") ₫</div>
                        </div>
                    </div>
                </a>
            </div>
        }
    </div>
}
